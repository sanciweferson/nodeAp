{
  "version": 3,
  "sources": ["../../../../src/utils/transform/utils/normalizeSecuritySchemes.ts"],
  "sourcesContent": ["import type { AnyObject } from '@/types/index'\n\nexport const normalizeSecuritySchemes = (definition: AnyObject) => {\n  if (!definition.components?.securitySchemes) {\n    return definition\n  }\n\n  const securitySchemes = { ...definition.components.securitySchemes }\n\n  for (const scheme of Object.values(securitySchemes)) {\n    if (typeof scheme === 'object' && scheme !== null && 'type' in scheme) {\n      const type = String(scheme.type).toLowerCase()\n      scheme.type =\n        {\n          apikey: 'apiKey',\n          oauth2: 'oauth2',\n          http: 'http',\n          mutualtls: 'mutualTLS',\n          openidconnect: 'openIdConnect',\n        }[type] ?? type\n    }\n  }\n\n  // Convert array scopes to objects\n  for (const scheme of Object.values(securitySchemes)) {\n    if (\n      typeof scheme === 'object' &&\n      scheme !== null &&\n      'type' in scheme &&\n      scheme.type === 'oauth2' &&\n      'flows' in scheme\n    ) {\n      const flows = scheme.flows as AnyObject\n      for (const flow of Object.values(flows)) {\n        if (typeof flow === 'object' && flow !== null && 'scopes' in flow && Array.isArray(flow.scopes)) {\n          flow.scopes = flow.scopes.reduce((acc: AnyObject, scope: string) => {\n            acc[scope] = ''\n            return acc\n          }, {})\n        }\n      }\n    }\n  }\n\n  return {\n    ...definition,\n    components: {\n      ...definition.components,\n      securitySchemes,\n    },\n  }\n}\n"],
  "mappings": "AAEO,MAAM,2BAA2B,CAAC,eAA0B;AACjE,MAAI,CAAC,WAAW,YAAY,iBAAiB;AAC3C,WAAO;AAAA,EACT;AAEA,QAAM,kBAAkB,EAAE,GAAG,WAAW,WAAW,gBAAgB;AAEnE,aAAW,UAAU,OAAO,OAAO,eAAe,GAAG;AACnD,QAAI,OAAO,WAAW,YAAY,WAAW,QAAQ,UAAU,QAAQ;AACrE,YAAM,OAAO,OAAO,OAAO,IAAI,EAAE,YAAY;AAC7C,aAAO,OACL;AAAA,QACE,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,QACX,eAAe;AAAA,MACjB,EAAE,IAAI,KAAK;AAAA,IACf;AAAA,EACF;AAGA,aAAW,UAAU,OAAO,OAAO,eAAe,GAAG;AACnD,QACE,OAAO,WAAW,YAClB,WAAW,QACX,UAAU,UACV,OAAO,SAAS,YAChB,WAAW,QACX;AACA,YAAM,QAAQ,OAAO;AACrB,iBAAW,QAAQ,OAAO,OAAO,KAAK,GAAG;AACvC,YAAI,OAAO,SAAS,YAAY,SAAS,QAAQ,YAAY,QAAQ,MAAM,QAAQ,KAAK,MAAM,GAAG;AAC/F,eAAK,SAAS,KAAK,OAAO,OAAO,CAAC,KAAgB,UAAkB;AAClE,gBAAI,KAAK,IAAI;AACb,mBAAO;AAAA,UACT,GAAG,CAAC,CAAC;AAAA,QACP;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,YAAY;AAAA,MACV,GAAG,WAAW;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;",
  "names": []
}
