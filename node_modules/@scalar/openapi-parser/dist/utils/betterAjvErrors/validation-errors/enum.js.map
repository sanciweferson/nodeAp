{
  "version": 3,
  "sources": ["../../../../src/utils/betterAjvErrors/validation-errors/enum.js"],
  "sourcesContent": ["import pointer from 'jsonpointer'\nimport leven from 'leven'\n\nimport BaseValidationError from './base'\n\nexport default class EnumValidationError extends BaseValidationError {\n  constructor(...args) {\n    super(...args)\n    this.name = 'EnumValidationError'\n  }\n\n  getError() {\n    const { message, params } = this.options\n    const bestMatch = this.findBestMatch()\n    const allowedValues = params.allowedValues.join(', ')\n\n    const output = {\n      message: `${message}: ${allowedValues}`,\n      path: this.instancePath,\n    }\n\n    if (bestMatch !== null) {\n      output.suggestion = `Did you mean ${bestMatch}?`\n    }\n\n    return output\n  }\n\n  findBestMatch() {\n    const {\n      params: { allowedValues },\n    } = this.options\n\n    const currentValue = this.instancePath === '' ? this.data : pointer.get(this.data, this.instancePath)\n\n    if (!currentValue) {\n      return null\n    }\n\n    const bestMatch = allowedValues\n      .map((value) => ({\n        value,\n        weight: leven(value, currentValue.toString()),\n      }))\n      .sort((x, y) => (x.weight > y.weight ? 1 : x.weight < y.weight ? -1 : 0))[0]\n\n    return allowedValues.length === 1 || bestMatch.weight < bestMatch.value.length ? bestMatch.value : null\n  }\n}\n"],
  "mappings": "AAAA,OAAO,aAAa;AACpB,OAAO,WAAW;AAElB,OAAO,yBAAyB;AAEhC,MAAO,4BAA0C,oBAAoB;AAAA,EACnE,eAAe,MAAM;AACnB,UAAM,GAAG,IAAI;AACb,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,WAAW;AACT,UAAM,EAAE,SAAS,OAAO,IAAI,KAAK;AACjC,UAAM,YAAY,KAAK,cAAc;AACrC,UAAM,gBAAgB,OAAO,cAAc,KAAK,IAAI;AAEpD,UAAM,SAAS;AAAA,MACb,SAAS,GAAG,OAAO,KAAK,aAAa;AAAA,MACrC,MAAM,KAAK;AAAA,IACb;AAEA,QAAI,cAAc,MAAM;AACtB,aAAO,aAAa,gBAAgB,SAAS;AAAA,IAC/C;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,gBAAgB;AACd,UAAM;AAAA,MACJ,QAAQ,EAAE,cAAc;AAAA,IAC1B,IAAI,KAAK;AAET,UAAM,eAAe,KAAK,iBAAiB,KAAK,KAAK,OAAO,QAAQ,IAAI,KAAK,MAAM,KAAK,YAAY;AAEpG,QAAI,CAAC,cAAc;AACjB,aAAO;AAAA,IACT;AAEA,UAAM,YAAY,cACf,IAAI,CAAC,WAAW;AAAA,MACf;AAAA,MACA,QAAQ,MAAM,OAAO,aAAa,SAAS,CAAC;AAAA,IAC9C,EAAE,EACD,KAAK,CAAC,GAAG,MAAO,EAAE,SAAS,EAAE,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,KAAK,CAAE,EAAE,CAAC;AAE7E,WAAO,cAAc,WAAW,KAAK,UAAU,SAAS,UAAU,MAAM,SAAS,UAAU,QAAQ;AAAA,EACrG;AACF;",
  "names": []
}
